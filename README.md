
<div align="right">
  <details>
    <summary >üåê Language</summary>
    <div>
      <div align="right">
        <p><a href="https://openaitx.github.io/view.html?user=yuvraj108c&project=ComfyUI-FLOAT&lang=en">English</a></p>
        <p><a href="https://openaitx.github.io/view.html?user=yuvraj108c&project=ComfyUI-FLOAT&lang=zh-CN">ÁÆÄ‰Ωì‰∏≠Êñá</a></p>
        <p><a href="https://openaitx.github.io/view.html?user=yuvraj108c&project=ComfyUI-FLOAT&lang=zh-TW">ÁπÅÈ´î‰∏≠Êñá</a></p>
        <p><a href="https://openaitx.github.io/view.html?user=yuvraj108c&project=ComfyUI-FLOAT&lang=ja">Êó•Êú¨Ë™û</a></p>
        <p><a href="https://openaitx.github.io/view.html?user=yuvraj108c&project=ComfyUI-FLOAT&lang=ko">ÌïúÍµ≠Ïñ¥</a></p>
        <p><a href="https://openaitx.github.io/view.html?user=yuvraj108c&project=ComfyUI-FLOAT&lang=hi">‡§π‡§ø‡§®‡•ç‡§¶‡•Ä</a></p>
        <p><a href="https://openaitx.github.io/view.html?user=yuvraj108c&project=ComfyUI-FLOAT&lang=th">‡πÑ‡∏ó‡∏¢</a></p>
        <p><a href="https://openaitx.github.io/view.html?user=yuvraj108c&project=ComfyUI-FLOAT&lang=fr">Fran√ßais</a></p>
        <p><a href="https://openaitx.github.io/view.html?user=yuvraj108c&project=ComfyUI-FLOAT&lang=de">Deutsch</a></p>
        <p><a href="https://openaitx.github.io/view.html?user=yuvraj108c&project=ComfyUI-FLOAT&lang=es">Espa√±ol</a></p>
        <p><a href="https://openaitx.github.io/view.html?user=yuvraj108c&project=ComfyUI-FLOAT&lang=it">Itapano</a></p>
        <p><a href="https://openaitx.github.io/view.html?user=yuvraj108c&project=ComfyUI-FLOAT&lang=ru">–†—É—Å—Å–∫–∏–π</a></p>
        <p><a href="https://openaitx.github.io/view.html?user=yuvraj108c&project=ComfyUI-FLOAT&lang=pt">Portugu√™s</a></p>
        <p><a href="https://openaitx.github.io/view.html?user=yuvraj108c&project=ComfyUI-FLOAT&lang=nl">Nederlands</a></p>
        <p><a href="https://openaitx.github.io/view.html?user=yuvraj108c&project=ComfyUI-FLOAT&lang=pl">Polski</a></p>
        <p><a href="https://openaitx.github.io/view.html?user=yuvraj108c&project=ComfyUI-FLOAT&lang=ar">ÿßŸÑÿπÿ±ÿ®Ÿäÿ©</a></p>
        <p><a href="https://openaitx.github.io/view.html?user=yuvraj108c&project=ComfyUI-FLOAT&lang=fa">ŸÅÿßÿ±ÿ≥€å</a></p>
        <p><a href="https://openaitx.github.io/view.html?user=yuvraj108c&project=ComfyUI-FLOAT&lang=tr">T√ºrk√ße</a></p>
        <p><a href="https://openaitx.github.io/view.html?user=yuvraj108c&project=ComfyUI-FLOAT&lang=vi">Ti·∫øng Vi·ªát</a></p>
        <p><a href="https://openaitx.github.io/view.html?user=yuvraj108c&project=ComfyUI-FLOAT&lang=id">Bahasa Indonesia</a></p>
      </div>
    </div>
  </details>
</div>

<div align="center">

# ComfyUI FLOAT 

[![python](https://img.shields.io/badge/python-3.10.12-green)](https://www.python.org/downloads/release/python-31012/)
[![arXiv](https://img.shields.io/badge/arXiv%20paper-2412.09013-b31b1b.svg)](https://arxiv.org/abs/2412.01064) 
[![by-nc-sa/4.0](https://img.shields.io/badge/license-CC--BY--NC--SA--4.0-lightgrey)](https://creativecommons.org/licenses/by-nc-sa/4.0/deed.en)

</div>

This project provides a ComfyUI wrapper of [FLOAT](https://github.com/deepbrainai-research/float) for Generative Motion Latent Flow Matching for Audio-driven Talking Portrait

For a more advanced and maintained version, check out: [ComfyUI-FLOAT_Optimized](https://github.com/set-soft/ComfyUI-FLOAT_Optimized)

<div align="center">
  <video src="https://github.com/user-attachments/assets/36626b4a-d3e5-4db9-87a7-ca0e949daee0" />
</div> 


## ‚≠ê Support
If you like my projects and wish to see updates and new features, please consider supporting me. It helps a lot! 

[![ComfyUI-Depth-Anything-Tensorrt](https://img.shields.io/badge/ComfyUI--Depth--Anything--Tensorrt-blue?style=flat-square)](https://github.com/yuvraj108c/ComfyUI-Depth-Anything-Tensorrt)
[![ComfyUI-Upscaler-Tensorrt](https://img.shields.io/badge/ComfyUI--Upscaler--Tensorrt-blue?style=flat-square)](https://github.com/yuvraj108c/ComfyUI-Upscaler-Tensorrt)
[![ComfyUI-Dwpose-Tensorrt](https://img.shields.io/badge/ComfyUI--Dwpose--Tensorrt-blue?style=flat-square)](https://github.com/yuvraj108c/ComfyUI-Dwpose-Tensorrt)
[![ComfyUI-Rife-Tensorrt](https://img.shields.io/badge/ComfyUI--Rife--Tensorrt-blue?style=flat-square)](https://github.com/yuvraj108c/ComfyUI-Rife-Tensorrt)

[![ComfyUI-Whisper](https://img.shields.io/badge/ComfyUI--Whisper-gray?style=flat-square)](https://github.com/yuvraj108c/ComfyUI-Whisper)
[![ComfyUI_InvSR](https://img.shields.io/badge/ComfyUI__InvSR-gray?style=flat-square)](https://github.com/yuvraj108c/ComfyUI_InvSR)
[![ComfyUI-FLOAT](https://img.shields.io/badge/ComfyUI--FLOAT-gray?style=flat-square)](https://github.com/yuvraj108c/ComfyUI-FLOAT)
[![ComfyUI-Thera](https://img.shields.io/badge/ComfyUI--Thera-gray?style=flat-square)](https://github.com/yuvraj108c/ComfyUI-Thera)
[![ComfyUI-Video-Depth-Anything](https://img.shields.io/badge/ComfyUI--Video--Depth--Anything-gray?style=flat-square)](https://github.com/yuvraj108c/ComfyUI-Video-Depth-Anything)
[![ComfyUI-PiperTTS](https://img.shields.io/badge/ComfyUI--PiperTTS-gray?style=flat-square)](https://github.com/yuvraj108c/ComfyUI-PiperTTS)

[![buy-me-coffees](https://i.imgur.com/3MDbAtw.png)](https://www.buymeacoffee.com/yuvraj108cZ)
[![paypal-donation](https://i.imgur.com/w5jjubk.png)](https://paypal.me/yuvraj108c)
---

## üöÄ Installation

```bash
git clone https://github.com/yuvraj108c/ComfyUI-FLOAT.git
cd ./ComfyUI-FLOAT
pip install -r requirements.txt
```

## ‚òÄÔ∏è Usage

- Load [example workflow](float_workflow.json) 
- Upload driving image and audio, click queue
- [Models](https://huggingface.co/yuvraj108c/float/tree/main) autodownload to `/ComfyUI/models/float`
- The models are organized as follows:
    ```.bash
    |-- float.pth                                       # main model
    |-- wav2vec2-base-960h/                             # audio encoder
    |   |-- config.json
    |   |-- model.safetensors
    |   |-- preprocessor_config.json
    |-- wav2vec-english-speech-emotion-recognition/     # emotion encoder
        |-- config.json
        |-- preprocessor_config.json
        |-- pytorch_model.bin

## üõ†Ô∏è Parameters
- `ref_image`: Reference image with a face (must have batch size 1)
- `ref_audio`: Reference audio (For long audios (e.g 3+ minutes), ensure that you have enough ram/vram)
- `a_cfg_scale`: Audio classifier-free guidance scale (default:2)
- `r_cfg_scale`: Reference classifier-free guidance scale (default:1)
- `emotion`: none, angry, disgust, fear, happy, neutral, sad, surprise (default:none)
- `e_cfg_scale`: Intensity of emotion (default:1). For more emotion intensive video, try large value from 5 to 10
- `crop`: Enable only if the reference image does not have a centered face
- `fps`: Frame rate of the output video (default:25)

   
## Citation
```bibtex
@article{ki2024float,
  title={FLOAT: Generative Motion Latent Flow Matching for Audio-driven Talking Portrait},
  author={Ki, Taekyung and Min, Dongchan and Chae, Gyeongsu},
  journal={arXiv preprint arXiv:2412.01064},
  year={2024}
}
```

## Acknowledgments
Thanks to [simplepod.ai](https://simplepod.ai/) for providing GPU servers

## License

[Creative Commons Attribution-NonCommercial-ShareAlike 4.0 International (CC BY-NC-SA 4.0)](https://creativecommons.org/licenses/by-nc-sa/4.0/)
